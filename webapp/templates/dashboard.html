{% extends "global_layout.html" %}


{% block head %}
<link rel="stylesheet"
      type="text/css"
      href="{{ url_for('dashboard.static', filename='css/dashboard.css') }}">
<script src="{{ url_for('dashboard.static', filename='js/dashboard.js') }}" type="module"></script>
<title>BaSe - Dashboard</title>
{% endblock %}


{% block content %}
<script>
    BASE_ADDRESS = "ws://{{base_address}}:8453";
    console.log("received BaSe IP address: {{base_address}}");
</script>

<div id="warning-banner">
    <span id="banner-message"><span id="banner-warning-count">0</span> ungesehene Warnungen!</span>
    <a href="/" id="banner-link">ansehen</a>
    <button id="banner-dismiss">×</button>
</div>

<div id="center">
    <div id="icons-wrapper" class="center-wrapper">
        <div class="centered-column">
            <img class="dashboard-icon" src="{{ url_for('dashboard.static', filename='image/schedule.svg') }}">
            <div id="next-backup-due-text">0:00:00</div>
        </div>
        <div>
            <img class="dashboard-icon" id="dock-icon" src="{{ url_for('dashboard.static', filename='image/dock.svg') }}">
        </div>
        <div>
            <img class="dashboard-icon" id="power-icon" src="{{ url_for('dashboard.static', filename='image/power.svg') }}">
        </div>
        <div>
            <img class="dashboard-icon" id="mount-icon" src="{{ url_for('dashboard.static', filename='image/mount.svg') }}">
        </div>
        <div>
            <img class="dashboard-icon" id="backup-icon" src="{{ url_for('dashboard.static', filename='image/copy.svg') }}">
        </div>
    </div>
    <div id="hdd-info-wrapper" class="center-wrapper">
        <div id="hdd-space-free">
            <div id="hdd-space-used"></div>
        </div>
        <span id="backup-hdd-usage-text"><span id="backup-hdd-usage-percentage">?</span><span>% belegt</span></span>
        <span id="backup-hdd-not-available-text">Festplatte nicht verfügbar</span>
    </div>
</div>

<div id="backup-now-wrapper" class="backup-button-wrapper">
    <button id="backup-now" class="backup-button">Backup now!</button>
</div>
<div id="abort-backup-wrapper" class="backup-button-wrapper">
    <button id="backup-abort" class="backup-button">Abort backup now!</button>
</div>

<div id="backup-status-wrapper">Backup-Status</div>

<div id="log-view-header">
    <span>Letzte Log-Einträge:</span>
    <a id="view-log" href="/">alle ansehen</a></div>
<textarea id="log-view" rows="5" readonly></textarea>

{% endblock %}